<div class="table_wrapper span10">
  <h2>Community Programs</h2>

  <% if community_programs.count > 0 %>
    <table class="table table-striped table-sorter">
      <thead>
        <tr>
          <th>Organization</th>
          <th>Program Name</th>
          <th class="center">Community School Elements</th>
          <th class="">Service Types</th>
        </tr>
      </thead>

      <tbody>
        <% community_programs.each do |community_program| %>
          <tr>
            <td><%= link_to community_program.organization.try(:name), organization_path(community_program.organization) %></td>
            <td><%= link_to community_program.name, community_program_path(community_program) %></td>
            <td class="center"><%= community_program.quality_elements.map{|qe| qe.name}.join(', <br />').html_safe %></td>
            <td><%= community_program.service_types.map{|st| st.name}.join(', <br />').html_safe %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p>There are currently no community programs available for <%= school.name %></p>
  <% end %>
</div>
