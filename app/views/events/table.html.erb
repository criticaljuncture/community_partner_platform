<div class="table_wrapper">
  <table class="table table-striped table-hover table-sorter events">
    <thead>
      <tr>
        <th class="name"><%= I18n.t('events.name') %></th>
        <th class="start_date"><%= I18n.t('events.start_date') %></th>
        <th class="end_date"><%= I18n.t('events.end_date').pluralize %></th>
        <th class="organizations">Participating <%= I18n.t('organizations.class.name').pluralize %></th>
        <th class="locations">Participating <%= I18n.t('locations.class.name').pluralize %></th>
        <th class="actions sorter-false filter-false"></th>
      </tr>
    </thead>

    <tbody>
      <% @events.each do |event| %>
        <tr>
          <td class="name"><%= event.name %></td>
          <td class="start_date"><%= event.start_date %></td>
          <td class="end_date"><%= event.end_date %></td>
          <td class="organizations">
            <%= event.organizations.map do |organization| %>
              <% link_to organization.name, organization_path(organization) %>
            <% end.join(", ").html_safe %>
          </td>
          <td class="locations">
            <%= event.locations.map do |location| %>
              <% if location.type == "School" %>
                <% link_to location.name, school_path(location) %>
              <% end %>
            <% end.join(", ").html_safe %>
          </td>
          <td class="actions center">
            <%= link_to_gicon 'view',
              event_path(event),
              class: "btn btn-info btn-medium",
              icon: 'eye-open' %>
            <%= link_to_gicon(
                'edit',
                edit_event_path(event),
                class: "btn btn-primary btn-medium",
                icon: 'pencil'
              ) if can?(:manage, event) %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
